diff -r -x '*.config' -x '*git*' -x '*.md' -x '*.xml' d4j_buggy/Closure171/src/com/google/javascript/jscomp/TypedScopeCreator.java d4j_patched/Closure171/src/com/google/javascript/jscomp/TypedScopeCreator.java
1668a1669,1671
>       if (qName != null && qName.endsWith(".prototype")) {
>         return false;
>       }
diff -r -x '*.config' -x '*git*' -x '*.md' -x '*.xml' d4j_buggy/Closure171/src/com/google/javascript/jscomp/TypeInference.java d4j_patched/Closure171/src/com/google/javascript/jscomp/TypeInference.java
731,736c731
<     if (objectType == null) {
<       return scope;
<     }
<     boolean hasLendsName = n.getJSDocInfo() != null &&
<         n.getJSDocInfo().getLendsName() != null;
<     if (objectType.hasReferenceName() && !hasLendsName) {
---
>     if (objectType == null || n.getBooleanProp(Node.REFLECTED_OBJECT)) {
