diff -r -x '*.config' -x '*git*' -x '*.md' -x '*.xml' d4j_buggy/Closure74/src/com/google/javascript/jscomp/PeepholeFoldConstants.java d4j_patched/Closure74/src/com/google/javascript/jscomp/PeepholeFoldConstants.java
907,908c907,908
<     int lhType = left.getType();
<     int rhType = right.getType();
---
>     int lhType = getNormalizedNodeType(left);
>     int rhType = getNormalizedNodeType(right);
1073a1074,1086
>   private int getNormalizedNodeType(Node n) {
>     int type = n.getType();
>     if (type == Token.NOT) {
>       TernaryValue value = NodeUtil.getPureBooleanValue(n);
>       switch (value) {
>         case TRUE:
>           return Token.TRUE;
>         case FALSE:
>           return Token.FALSE;
>       }
>     }
>     return type;
>   }
